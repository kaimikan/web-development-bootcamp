<%- include("partials/header.ejs") %>

<body>
  <h1>Blog</h1>
  <% if (locals.posts) { %>
  <ul>
    <% for (let i = 0; i < posts.length; i++) { %>
    <li>
      <h2><%= posts[i].title %></h2>
      <p><%= posts[i].content %></p>
      <p><em><%= posts[i].timeText %></em></p>

      <div id="post-actions">
        <% if (isAdmin) { %>
        <form action="/delete" method="DELETE">
          <input type="hidden" name="postIdDelete" value="<%= i %>" />
          <input type="submit" name="delete-post" value="Delete Post" />
        </form>
        <form action="/updateStart" method="UPDATE">
          <input type="hidden" name="postIdUpdate" value="<%= i %>" />
          <input type="submit" name="update-post" value="Update Post" />
        </form>
        <% } %>
        <form action="/open" method="GET">
          <input type="hidden" name="postIdOpen" value="<%= i %>" />
          <input type="submit" name="open-post" value="Open Post" />
        </form>
      </div>
    </li>
    <% } %>
  </ul>
  <% } %> <% if (isAdmin) { %>
  <h2>Create a new post</h2>
  <form action="/post" method="POST">
    <label for="post-title">Title:</label>
    <input type="text" name="post-title" value="" />
    <label for="post-content">Content:</label>
    <input type="text" name="post-content" value="" />
    <input type="submit" name="submit-post" value="Post" />
  </form>
  <% } %> <%- include("partials/footer.ejs") %>
</body>
